---
layouts: post
title: uLogMe - Acompanhe como você usa seu tempo!
tags: [ulogme, linux, programas, produtividade]
---


## <a name="uLogeMe - Seu Logger pessoal"></a>uLogeMe - Seu Logger pessoal

Este post abordará um programa Open-Source escrito em _Python_, _Bash_ e _JavaScript_ que tem por finalidade salvar todas as atividades feitas no computador. Ele armazenará todos os nomes de janelas abertas no dia, bem como a hora que esta janela foi aberta. Posteriormente, com todos os dados salvos, ele cria de forma automática várias estatísticas de uso, possibilitando fácil visualização de como o tempo foi gasto em cada atividade.
Não preocupe, seus dados pertencerão somente a você! O uLogMe não faz upload de absolutamente nada para qualquer armazenamento externo.


## Sumário

Para nos organizarmos melhor nesse post, teremos a seguinte estrutura:
 - <a href="#uLogeMe - Seu Logger pessoal" style="text-decoration: none">Requisitos</a>
 - <a href="#Um breve overview" style="text-decoration: none">Um breve overview</a>
 - <a href="#Instalação" style="text-decoration: none">Instalação</a>
 - Configuração
 - Conhecendo seu novo Logger


## Requisitos

 - Para que você possa instalar esse programa é necessário que você tenha um sistema operacional Linux. (caso você tenha um sistema operacional OS X, veja a [página do criador original, *Karpathy*, no github](https://github.com/karpathy/ulogme)). Esse post é baseado na versão criada pelo [*Naereen*](https://github.com/Naereen/uLogMe), que fez umas boas modificações no código original.<br>Me desculpe, se você usa Windows não conseguirá usar o uLogMe...

 - Será necessário que você algum conhecimento básico sobre operações por linha de comando (não se preocupe, tentarei ser o mais simples possível)


## <a name="Um breve overview"></a>Um breve overview

Hoje nós falaremos sobre o uLogMe. Ele é um programa que salva toda a sua atividade feita no computador, quanto tempo você gasta em cada janela aberta, e no final mosta alguns gráficos bem legais. Dessa forma, você pode analisar como está gastando seu tempo, ver se tem alguma atividade atrapalhando sua produtividade ~Instagram~ e, assim, tomar medidas para melhorar isso.

Aqui estão alguns exemplos de estatísticas geradas automaticamente:

![daily view - ulogme](/img/ulogme/ulogme_activity_breakdown.png)
<div style='font-family: Calibri; color: grey; font-size: 13px; text-align: right;'>Resumo das atividades do dia.</div>

![key strokes](/img/ulogme/ulogme_num_of_keystrokes.png)
<div style='font-family: Calibri; color: grey; font-size: 13px; text-align: right;'>Número de teclas digitadas por segundo - em cada janela.</div>

![bar codes](/img/ulogme/ulogme_bar_codes.png)
<div style='font-family: Calibri; color: grey; font-size: 13px; text-align: right;'>"Código de Barras" mostrando, por grupos, quanto tempo foi gasto em cada atividade. Por exemplo, minha segunda linha corresponde à linha de estudos bíblicos/devocinal. Com esse gráfico é possível ver que meu perído de devocional esse dia foi entre as 10:30 até as 11:30 mais ou menos.</div>

![bar codes](/img/ulogme/ulogme_all_days_overview.png)
<div style='font-family: Calibri; color: grey; font-size: 13px; text-align: right;'>O uLogMe também apresenta um overview de todos os dias dos quais ele tem dados</div>

![bar codes](/img/ulogme/ulogme__all_days_per_window_sumarie.png)
<div style='font-family: Calibri; color: grey; font-size: 13px; text-align: right;'>Também tem o total de tempo por janela (coluna da esquerda) e o total de teclas digitadas em cada janela (coluna da direita).</div>

![bar codes](/img/ulogme/ulogme_all_days_total_keys_pressed.png)
<div style='font-family: Calibri; color: grey; font-size: 13px; text-align: right;'>E, por fim, temos um gráfico com a frequência, quantidade e distribuição de teclas digitadas durante o dia.</div>

E aí, o que achou das estatísticas que o uLogMe gera?

Bom, se você se interessou de ter acesso a esses dados de uso, vamos passar para a parte de instalação do programa.

## <a name="Instalação"></a>Instalação


### Instalando Pacotes Necessários

Primeiramente, é bom que você dê uma olhada na [página de instalação oficial](https://github.com/Naereen/uLogMe).

Como requisitos para correto funcionamento, você terá que instalar os seguintes pacotes: `git`, `xdotool`, `xinput`, `wmctrl` e `xprintidle`

Se seu sistema for o Debian ou algum dos seus derivados (como o Ubuntu, Linux Mint, etc.) você pode executar o seguinte comando para instalar todos estes pacotes de uma vez só:

```bash
sudo apt install git xdotool xinput wmctrl xprintidle
```

Caso você use uma distro não baseada em Debian, pode instalar esses pacotes substituindo `apt` por `pacman` (ArchLinux) ou `yum` (Fedora), por exemplo.


### Baixando o Programa

Bem, agora que os pacotes necessários estão intalados, você terá de baixar o programa.
Primeiro, abra o terminal e digite:

```bash
cd ~/.local/
```

Com esse comando, você está mudando da pasta atualmente aberta para a pasta _~/.local/_. (note que `~` é simplesmente um atalho para o diretório do seu usuário atual, com o formato `/home/<USUÁRIO>/`. No meu caso, seria o diretório `/home/matheus/`).
Você pode escolher qualquer pasta para salvar o programa. Não necessáriamente ele tem que estar localizado na pasta `.local`.

Agora que você está dentro do diretório que prente instalar o uLogMe, você pode baixá-lo com o comando:

```bash
git clone https://github.com/Naereen/uLogMe.git ulogme
```
Pronto. Agora que você tem o programa baixado, vamos entender como ele está organizado.


### Entendendo os diretórios do uLogMe

Essa é uma parte importante, pois entendendo como o uLogMe foi escrito te ajudará a modificá-lo no futuro. Assim, você poderá personalizá-lo para ficar da forma como você achar melhor.

Bom, assumindo que você instalou o programa no diretório `~/.local/` com o nome de `ulogme`, vamos agora explorar o que tem em cada pasta:

```bash
cd ~/.local/ulogme/

ls -l
```

Rodando esses comandos, nos asseguramos que estamos na pasta que o uLogMe foi instalado, e também podemos ver quais são os arquivos e subdiretórios que ele contém.

Você deve ter um output mais ou menos assim:

```plain
drwxr-xr-x 2 matheus matheus  4096 jul 22 08:10 logs
drwxr-xr-x 7 matheus matheus  4096 jul 10 23:50 render
drwxr-xr-x 2 matheus matheus  4096 jul 10 22:27 screenshots
drwxrwxr-x 4 matheus matheus  4096 jul 10 23:18 scripts
-rw-r--r-- 1 matheus matheus    25 jun 14 09:12 _config.yml
-rw-r--r-- 1 matheus matheus  1123 jun 14 09:12 LICENSE
-rw-r--r-- 1 matheus matheus  1406 jun 14 09:12 nginx.conf
-rw-r--r-- 1 matheus matheus 16156 jun 14 09:12 README.md
```
As linhas que começam com `d` indicam que o _output_ é um diretório. Portanto, no primeiro nível dentro do diretório `~/.local/ulogme/`, temos que `logs`, `render`, `screenshots` e `scripts` são diretórios. O outros são arquivos.

 - `_config.yml` é o arquivo principal de configuração da página Web que o uLogMe usa para mostrar as estatísticas.
 - `LICENSE` é a licença de uso do programa.
 - `nginx.conf` é o arquivo que configurará o servidor local para mostrar as estatísticas por qualquer navegador Web. (Uilizarei o Firefox durante este post, mas qualquer navegador deve funcionar, não se preocupe).
 - `README.md` é o arquivo com as informações de instalação (em inglês), do autor do uLogMe. Você pode acessar o mesmo arquivo, com uma formatação mais bacana, nesse [link](https://github.com/Naereen/uLogMe).

Vamos agora para o diretório `scripts`. Esse é o diretório que contém todos os arquivos responsáveis por criar o servidor Web (que permitirá a você ter acesso fácil às estatísticas geradas) e, também, por fazer a coleta dos dados. Pense nesse diretório como sendo o _motor_ de todo o programa.

```bash
cd ./scripts

ls -l
```

Os arquivos são os seguintes:

```plain
drwxrwxr-x 2 matheus matheus  4096 jul 10 23:20 icons
drwxrwxr-x 2 matheus matheus  4096 jul 11 22:24 __pycache__
-rwxrwxr-x 1 matheus matheus  3402 jun 14 09:12 color.sh
-rw-rw-r-- 1 matheus matheus  7196 jun 14 09:12 export_events.py
-rw-rw-r-- 1 matheus matheus  6275 jun 14 09:14 export_events.pyc
-rwxrwxr-x 1 matheus matheus  4211 jun 14 09:12 keyfreq.sh
-rw-rw-r-- 1 matheus matheus  4184 jun 14 09:12 legacy_split_events.py
-rwxrwxr-x 1 matheus matheus  7096 jun 14 09:12 logactivewin.sh
-rw-rw-r-- 1 matheus matheus   872 jun 14 09:12 logdesktop.sh
-rw-rw-r-- 1 matheus matheus   737 jun 14 09:12 note.sh
-rw-rw-r-- 1 matheus matheus  9242 jun 14 09:12 notify.py
-rw-rw-r-- 1 matheus matheus  6652 jun 14 09:14 notify.pyc
-rw-rw-r-- 1 matheus matheus 10126 jun 14 09:12 README.md
-rw-rw-r-- 1 matheus matheus  1971 jun 14 09:12 rewind7am.py
-rw-rw-r-- 1 matheus matheus  2159 jun 14 09:14 rewind7am.pyc
-rwxrwxr-x 1 matheus matheus   646 jul 16 17:13 ulogme_data.sh
-rw-rw-r-- 1 matheus matheus  4638 jun 14 09:12 ulogme_serve_https.py
-rw-rw-r-- 1 matheus matheus  8480 jun 14 09:12 ulogme_serve.py
-rw-rw-r-- 1 matheus matheus  1797 jun 14 09:12 ulogme_serve.sh
-rw-rw-r-- 1 matheus matheus  1682 jun 14 09:12 ulogme_tmux.sh
```

Se você tem um conhecimento básico de _Python_ e _Bash_, recomendo que dê uma olhada em cada um dos arquivos. Agora, mesmo que você não conheça nenhuma dessas linguagens, eu vou dar uma explicada básica sobre o que o programa está fazendo em cada um dos 4 arquivos principais do uLogMe.

 - 1. `ulogme_data.sh` - Esse é o principal arquivo de configuração, responsável por iniciar os sub-scripts que farão a coleta de dados.
Executando o seguinte comando, podemos dar uma olhada no que esse script faz:

```bash
cat ulogme_data.sh
```
O output deve ser algo mais ou menos assim:

```bash
#!/bin/bash
# ulogme_data.sh for https://github.com/Naereen/uLogMe/
# MIT Licensed, https://lbesson.mit-license.org/

# http://redsymbol.net/articles/unofficial-bash-strict-mode/
set -o pipefail
set -eu

# Use https://bitbucket.org/lbesson/bin/src/master/.color.sh to add colors in Bash scripts
echo "WARNING If you don't see colors correctly, remove the 'color.sh' file in 'uLogMe/scripts' to remove the colors, or modify it to suit your need (if you have a light background for instance)."  # See https://github.com/Naereen/uLogMe/issues/17
[ -f color.sh ] && . color.sh

cd "$( dirname '${BASH_SOURCE[0]}' )"

./keyfreq.sh &
./logactivewin.sh
```
Note que nas duas últimas linhas temos: `./keyfreq.sh &` e `./logactivewin.sh`. Isso significa que ele está iniciando os scripts `keyfreq.sh` e `logactivewin.sh`

 - 2. `keyfreq.sh` -
